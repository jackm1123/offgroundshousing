{% if listing %}
{% load static %}

  <script type="text/javascript" src="{% static 'listings/jquery.js' %}"></script>
  <script type="text/javascript" src="{% static 'listings/one_listing.js' %}"></script>
  <link rel="stylesheet" href="{% static 'listings/one_listing.css' %}">
  <style>
    #map {
      height: 400px;
      width: 100%;
    }
  </style>


  <div class="name" style="border: 3px solid black;">
    <h1>{{ listing.name }}</h1>
  </div>
  <div class="price" style="border: 2px solid black;">
    <p>Estimated costs: ${{ listing.price }}</p>
  </div>


  <div class="rating" style="border: 2px solid black;">
    <p style="display: none;">Rating = {{ listing.rating }}</p>
    <img src="{% static 'listings/0stars.png' %}" alt="0 stars" num="0">
    <img src="{% static 'listings/1stars.png' %}" alt="1 stars" num="1">
    <img src="{% static 'listings/2stars.png' %}" alt="2 stars" num="2">
    <img src="{% static 'listings/3stars.png' %}" alt="3 stars" num="3">
    <img src="{% static 'listings/4stars.png' %}" alt="4 stars" num="4">
    <img src="{% static 'listings/5stars.png' %}" alt="5 stars" num="5">
  </div>



  <div class="map" style="border: 2px solid black;">
    <p>Map</p>
    <div class="contact-info">
      <p>{{ listing.phone_num }}</p>
      <p>{{ listing.address }}</p>
      <!-- Email -->
    </div>
  </div>
  <div class="pics" style="border: 2px solid black;">
    <p>Pics</p>


    <!-- <img src="{% static 'listings/pics/4/'|add:listing.pictures %}" alt=""> -->
    {% if listing.pictures %}
    <img src="{% static 'listings/pics/' %}{{ listing.id }}/{{ listing.pictures }}" alt="">
    {% else %}
    <p>No pictures</p>
    {% endif %}


  </div>
  <div class="at-a-glance" style="border: 2px solid black;">
    <p><strong>Description:</strong> {{ listing.description }}</p>
    <p><strong>Laundry:</strong> {{ listing.laundry_info }}</p>
    <p><strong>square_footage:</strong> {{ listing.square_footage }} sqft</p>
    <p><strong>price:</strong> ${{ listing.price }}</p>
    <p><strong>bedroom_num:</strong> {{ listing.bedroom_num }}</p>
    <p><strong>ownership_info:</strong> {{ listing.ownership_info }}</p>
    <p><strong>submission_date:</strong> {{ listing.submission_date }}</p>

  </div>
  <div id="map"></div>
  <!-- Replace the value of the key parameter with your own API key. -->
  <script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyC01WGGqQ_6fkdF_nJNUj4q9G6WF7BUXTs&callback=initMap">
  </script>


  <script>
    function initMap() {
      // The location of Uluru
      var latt = Number("{{listing.latitude}}")
      var long = Number("{{listing.longitude}}")
      if (latt === ""){
        latt = 38.034
      }
      if (long === ""){
        long = 131.036
      }

      var location = {lat: latt, lng: long};
      // The map, centered at Uluru
      var map = new google.maps.Map(
          document.getElementById('map'), {zoom: 15, center: location});
      // The marker, positioned at Uluru
      var marker = new google.maps.Marker({position: location, map: map});
    }
  </script>


{% else %}
    <p>WHAT. No listing. :p</p>
{% endif %}
